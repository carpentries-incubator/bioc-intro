<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Introduction to data analysis with R and Bioconductor: Data organisation with spreadsheets</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="../assets/styles.css"><script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="manifest" href="../site.webmanifest"><link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"></head><body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav incubator"><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo">
        <img alt="Carpentries Incubator" src="../assets/images/incubator-logo.svg"></div>
    </div>
    <div class="selector-container">
      
      
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='../10-data-organisation.html';">Learner View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="../assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Introduction to data analysis with R and Bioconductor
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
      <i role="img" aria-label="search button" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Introduction to data analysis with R and Bioconductor
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"></ul></li>
      </ul></div>
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled><input class="form-control me-2 searchbox" type="search" placeholder="Search" aria-label="Search"><button class="btn btn-outline-success tablet-search-button" type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="search button"></i>
        </button>
      </fieldset></form>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Introduction to data analysis with R and Bioconductor
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 0%" class="percentage">
    0%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 0%" aria-valuenow="0" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../10-data-organisation.html">Learner View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->
      
            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        1. Data organisation with spreadsheets
        </span>
      </button>
    </div><!--/div.accordion-header-->
        
    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#spreadsheet-programs">Spreadsheet programs</a></li>
<li><a href="#formatting-data-tables-in-spreadsheets">Formatting data tables in spreadsheets</a></li>
<li><a href="#common-spreadsheet-errors">Common spreadsheet errors</a></li>
<li><a href="#exporting-data">Exporting data</a></li>
<li><a href="#summary">Summary</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="20-r-rstudio.html">2. R and RStudio</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="23-starting-with-r.html">3. Introduction to R</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="25-starting-with-data.html">4. Starting with data</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="30-dplyr.html">5. Manipulating and analysing data with dplyr</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="40-visualization.html">6. Data visualization</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="60-next-steps.html">7. Next steps</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width resources"><a href="../instructor/aio.html">See all in one page</a>
            

            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">
            
            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/index.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/20-r-rstudio.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/index.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Home
        </a>
        <a class="chapter-link float-end" href="../instructor/20-r-rstudio.html" rel="next">
          Next: R and RStudio... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Data organisation with spreadsheets</h1>
        <p> Last updated on 2023-11-21 | 
        
        <a href="https://github.com/carpentries-incubator/bioc-intro/edit/main/episodes/10-data-organisation.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
        
        
        
        <p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 60 minutes </p>
        
        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How to organise tabular data?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Learn about spreadsheets, their strengths and weaknesses.</li>
<li>How do we format data in spreadsheets for effective data use?</li>
<li>Learn about common spreadsheet errors and how to correct them.</li>
<li>Organise your data according to tidy data principles.</li>
<li>Learn about text-based spreadsheet formats such as the
comma-separated (CSV) or tab-separated (TSV) formats.</li>
</ul></div>
</div>
</div>
</div>
</div>
<section id="spreadsheet-programs"><h2 class="section-heading">Spreadsheet programs<a class="anchor" aria-label="anchor" href="#spreadsheet-programs"></a>
</h2>
<hr class="half-width"><p><strong>Question</strong></p>
<ul><li>What are basic principles for using spreadsheets for good data
organization?</li>
</ul><p><strong>Objective</strong></p>
<ul><li>Describe best practices for organizing data so computers can make
the best use of datasets.</li>
</ul><p><strong>Keypoint</strong></p>
<ul><li>Good data organization is the foundation of any research
project.</li>
</ul><p>Good data organization is the foundation of your research project.
Most researchers have data or do data entry in spreadsheets. Spreadsheet
programs are very useful graphical interfaces for designing data tables
and handling very basic data quality control functions. See also <span class="citation">@Broman:2018</span>.</p>
<div class="section level3">
<h3 id="spreadsheet-outline">Spreadsheet outline<a class="anchor" aria-label="anchor" href="#spreadsheet-outline"></a></h3>
<p>Spreadsheets are good for data entry. Therefore we have a lot of data
in spreadsheets. Much of your time as a researcher will be spent in this
‘data wrangling’ stage. It’s not the most fun, but it’s necessary. We’ll
teach you how to think about data organization and some practices for
more effective data wrangling.</p>
</div>
<div class="section level3">
<h3 id="what-this-lesson-will-not-teach-you">What this lesson will not teach you<a class="anchor" aria-label="anchor" href="#what-this-lesson-will-not-teach-you"></a></h3>
<ul><li>How to do <em>statistics</em> in a spreadsheet</li>
<li>How to do <em>plotting</em> in a spreadsheet</li>
<li>How to <em>write code</em> in spreadsheet programs</li>
</ul><p>If you’re looking to do this, a good reference is <a href="https://www.amazon.com/Head-First-Excel-learners-spreadsheets/dp/0596807694/" class="external-link">Head
First Excel</a>, published by O’Reilly.</p>
</div>
<div class="section level3">
<h3 id="why-arent-we-teaching-data-analysis-in-spreadsheets">Why aren’t we teaching data analysis in spreadsheets<a class="anchor" aria-label="anchor" href="#why-arent-we-teaching-data-analysis-in-spreadsheets"></a></h3>
<ul><li><p>Data analysis in spreadsheets usually requires a lot of manual
work. If you want to change a parameter or run an analysis with a new
dataset, you usually have to redo everything by hand. (We do know that
you can create macros, but see the next point.)</p></li>
<li><p>It is also difficult to track or reproduce statistical or
plotting analyses done in spreadsheet programs when you want to go back
to your work or someone asks for details of your analysis.</p></li>
</ul><p>Many spreadsheet programs are available. Since most participants
utilise Excel as their primary spreadsheet program, this lesson will
make use of Excel examples. A free spreadsheet program that can also be
used is LibreOffice. Commands may differ a bit between programs, but the
general idea is the same.</p>
<p>Spreadsheet programs encompass a lot of the things we need to be able
to do as researchers. We can use them for:</p>
<ul><li>Data entry</li>
<li>Organizing data</li>
<li>Subsetting and sorting data</li>
<li>Statistics</li>
<li>Plotting</li>
</ul><p>Spreadsheet programs use tables to represent and display data. Data
formatted as tables is also the main theme of this chapter, and we will
see how to organise data into tables in a standardised way to ensure
efficient downstream analysis.</p>
<div id="challenge-discuss-the-following-points-with-your-neighbour" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="challenge-discuss-the-following-points-with-your-neighbour" class="callout-inner">
<h3 class="callout-title">Challenge: Discuss the following points with
your neighbour<a class="anchor" aria-label="anchor" href="#challenge-discuss-the-following-points-with-your-neighbour"></a>
</h3>
<div class="callout-content">
<ul><li>Have you used spreadsheets, in your research, courses, or at
home?</li>
<li>What kind of operations do you do in spreadsheets?</li>
<li>Which ones do you think spreadsheets are good for?</li>
<li>Have you accidentally done something in a spreadsheet program that
made you frustrated or sad?</li>
</ul></div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="problems-with-spreadsheets">Problems with spreadsheets<a class="anchor" aria-label="anchor" href="#problems-with-spreadsheets"></a></h3>
<p>Spreadsheets are good for data entry, but in reality we tend to use
spreadsheet programs for much more than data entry. We use them to
create data tables for publications, to generate summary statistics, and
make figures.</p>
<p>Generating tables for publications in a spreadsheet is not optimal -
often, when formatting a data table for publication, we’re reporting key
summary statistics in a way that is not really meant to be read as data,
and often involves special formatting (merging cells, creating borders,
making it pretty). We advise you to do this sort of operation within
your document editing software.</p>
<p>The latter two applications, generating statistics and figures,
should be used with caution: because of the graphical, drag and drop
nature of spreadsheet programs, it can be very difficult, if not
impossible, to replicate your steps (much less retrace anyone else’s),
particularly if your stats or figures require you to do more complex
calculations. Furthermore, in doing calculations in a spreadsheet, it’s
easy to accidentally apply a slightly different formula to multiple
adjacent cells. When using a command-line based statistics program like
R or SAS, it’s practically impossible to apply a calculation to one
observation in your dataset but not another unless you’re doing it on
purpose.</p>
</div>
<div class="section level3">
<h3 id="using-spreadsheets-for-data-entry-and-cleaning">Using spreadsheets for data entry and cleaning<a class="anchor" aria-label="anchor" href="#using-spreadsheets-for-data-entry-and-cleaning"></a></h3>
<p>In this lesson, we will assume that you are most likely using Excel
as your primary spreadsheet program - there are others (gnumeric, Calc
from OpenOffice), and their functionality is similar, but Excel seems to
be the program most used by biologists and biomedical researchers.</p>
<p>In this lesson we’re going to talk about:</p>
<ol style="list-style-type: decimal"><li>Formatting data tables in spreadsheets</li>
<li>Formatting problems</li>
<li>Exporting data</li>
</ol></div>
</section><section id="formatting-data-tables-in-spreadsheets"><h2 class="section-heading">Formatting data tables in spreadsheets<a class="anchor" aria-label="anchor" href="#formatting-data-tables-in-spreadsheets"></a>
</h2>
<hr class="half-width"><p><strong>Questions</strong></p>
<ul><li>How do we format data in spreadsheets for effective data use?</li>
</ul><p><strong>Objectives</strong></p>
<ul><li><p>Describe best practices for data entry and formatting in
spreadsheets.</p></li>
<li><p>Apply best practices to arrange variables and observations in a
spreadsheet.</p></li>
</ul><p><strong>Keypoints</strong></p>
<ul><li><p>Never modify your raw data. Always make a copy before making any
changes.</p></li>
<li><p>Keep track of all of the steps you take to clean your data in a
plain text file.</p></li>
<li><p>Organise your data according to tidy data principles.</p></li>
</ul><p>The most common mistake made is treating spreadsheet programs like
lab notebooks, that is, relying on context, notes in the margin, spatial
layout of data and fields to convey information. As humans, we can
(usually) interpret these things, but computers don’t view information
the same way, and unless we explain to the computer what every single
thing means (and that can be hard!), it will not be able to see how our
data fits together.</p>
<p>Using the power of computers, we can manage and analyse data in much
more effective and faster ways, but to use that power, we have to set up
our data for the computer to be able to understand it (and computers are
very literal).</p>
<p>This is why it’s extremely important to set up well-formatted tables
from the outset - before you even start entering data from your very
first preliminary experiment. Data organization is the foundation of
your research project. It can make it easier or harder to work with your
data throughout your analysis, so it’s worth thinking about when you’re
doing your data entry or setting up your experiment. You can set things
up in different ways in spreadsheets, but some of these choices can
limit your ability to work with the data in other programs or have the
you-of-6-months-from-now or your collaborator work with the data.</p>
<p><strong>Note:</strong> the best layouts/formats (as well as software
and interfaces) for data entry and data analysis might be different. It
is important to take this into account, and ideally automate the
conversion from one to another.</p>
<div class="section level3">
<h3 id="keeping-track-of-your-analyses">Keeping track of your analyses<a class="anchor" aria-label="anchor" href="#keeping-track-of-your-analyses"></a></h3>
<p>When you’re working with spreadsheets, during data clean up or
analyses, it’s very easy to end up with a spreadsheet that looks very
different from the one you started with. In order to be able to
reproduce your analyses or figure out what you did when a reviewer or
instructor asks for a different analysis, you should</p>
<ul><li><p>create a new file with your cleaned or analysed data. Don’t
modify the original dataset, or you will never know where you
started!</p></li>
<li><p>keep track of the steps you took in your clean up or analysis.
You should track these steps as you would any step in an experiment. We
recommend that you do this in a plain text file stored in the same
folder as the data file.</p></li>
</ul><p>This might be an example of a spreadsheet setup:</p>
<figure><img src="../fig/spreadsheet-setup-updated.png" class="figure mx-auto d-block"></figure><p>Put these principles in to practice today during your exercises.</p>
<p>While versioning is out of scope for this course, you can look at the
Carpentries lesson on <a href="https://swcarpentry.github.io/git-novice/" class="external-link">‘Git’</a> to learn how
to maintain <strong>version control</strong> over your data. See also
this <a href="https://lgatto.github.io/github-intro/" class="external-link">blog post</a> for
a quick tutorial or <span class="citation">@Perez-Riverol:2016</span>
for a more research-oriented use-case.</p>
</div>
<div class="section level3">
<h3 id="structuring-data-in-spreadsheets">Structuring data in spreadsheets<a class="anchor" aria-label="anchor" href="#structuring-data-in-spreadsheets"></a></h3>
<p>The cardinal rules of using spreadsheet programs for data:</p>
<ol style="list-style-type: decimal"><li>Put all your variables in columns - the thing you’re measuring, like
‘weight’ or ‘temperature’.</li>
<li>Put each observation in its own row.</li>
<li>Don’t combine multiple pieces of information in one cell. Sometimes
it just seems like one thing, but think if that’s the only way you’ll
want to be able to use or sort that data.</li>
<li>Leave the raw data raw - don’t change it!</li>
<li>Export the cleaned data to a text-based format like CSV
(comma-separated values) format. This ensures that anyone can use the
data, and is required by most data repositories.</li>
</ol><p>For instance, we have data from patients that visited several
hospitals in Brussels, Belgium. They recorded the date of the visit, the
hospital, the patients’ gender, weight and blood group.</p>
<p>If we were to keep track of the data like this:</p>
<figure><img src="../fig/multiple-info.png" class="figure mx-auto d-block"></figure><p>the problem is that the ABO and Rhesus groups are in the same
<code>Blood</code> type column. So, if they wanted to look at all
observations of the A group or look at weight distributions by ABO
group, it would be tricky to do this using this data setup. If instead
we put the ABO and Rhesus groups in different columns, you can see that
it would be much easier.</p>
<figure><img src="../fig/single-info.png" class="figure mx-auto d-block"></figure><p>An important rule when setting up a datasheet, is that
<strong>columns are used for variables</strong> and <strong>rows are
used for observations</strong>:</p>
<ul><li>columns are variables</li>
<li>rows are observations</li>
<li>cells are individual values</li>
</ul><div id="challenge-were-going-to-take-a-messy-dataset-and-describe-how-we-would-clean-it-up." class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="challenge-were-going-to-take-a-messy-dataset-and-describe-how-we-would-clean-it-up." class="callout-inner">
<h3 class="callout-title">Challenge: We’re going to take a messy dataset
and describe how we would clean it up.<a class="anchor" aria-label="anchor" href="#challenge-were-going-to-take-a-messy-dataset-and-describe-how-we-would-clean-it-up."></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li><p>Download a messy dataset by clicking <a href="https://github.com/UCLouvain-CBIO/WSBIM1207/raw/master/data/messy_covid.xlsx" class="external-link">here</a>.</p></li>
<li><p>Open up the data in a spreadsheet program.</p></li>
<li><p>You can see that there are two tabs. The data contains various
clinical variables recorded in various hospitals in Brussels during the
first and second COVID-19 waves in 2020. As you can see, the data have
been recorded differently during the March and November waves. Now
you’re the person in charge of this project and you want to be able to
start analyzing the data.</p></li>
<li><p>With the person next to you, identify what is wrong with this
spreadsheet. Also discuss the steps you would need to take to clean up
first and second wave tabs, and to put them all together in one
spreadsheet.</p></li>
</ol><p><strong>Important:</strong> Do not forget our first piece of advice:
to create a new file (or tab) for the cleaned data, never modify your
original (raw) data.</p>
</div>
</div>
</div>
<p>After you go through this exercise, we’ll discuss as a group what was
wrong with this data and how you would fix it.</p>
<!-- - Take about 10 minutes to work on this exercise. -->
<!-- - All the mistakes in the *common mistakes* section below are present -->
<!--   in the messy dataset. If the exercise is done during a workshop, ask -->
<!--   people what they saw as wrong with the data. As they bring up -->
<!--   different points, you can refer to the common mistakes or expand a -->
<!--   bit on the point they brought up. -->
<!-- - If you get a response where they've fixed the date, you can pause -->
<!--   and go to the dates lesson. Or you can say you'll come back to dates -->
<!--   at the end. -->
<div id="challenge-once-you-have-tidied-up-the-data-answer-the-following-questions" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="challenge-once-you-have-tidied-up-the-data-answer-the-following-questions" class="callout-inner">
<h3 class="callout-title">Challenge: Once you have tidied up the data,
answer the following questions:<a class="anchor" aria-label="anchor" href="#challenge-once-you-have-tidied-up-the-data-answer-the-following-questions"></a>
</h3>
<div class="callout-content">
<ul><li>How many men and women took part in the study?</li>
<li>How many A, AB, and B types have been tested?</li>
<li>As above, but disregarding the contaminated samples?</li>
<li>How many Rhesus + and - have been tested?</li>
<li>How many universal donors (O-) have been tested?</li>
<li>What is the average weight of AB men?</li>
<li>How many samples have been tested in the different hospitals?</li>
</ul></div>
</div>
</div>
<p>An <strong>excellent reference</strong>, in particular with regard to
R scripting is the <em>Tidy Data</em> paper <span class="citation">@Wickham:2014</span>.</p>
</div>
</section><section id="common-spreadsheet-errors"><h2 class="section-heading">Common spreadsheet errors<a class="anchor" aria-label="anchor" href="#common-spreadsheet-errors"></a>
</h2>
<hr class="half-width"><p><strong>Questions</strong></p>
<ul><li>What are some common challenges with formatting data in spreadsheets
and how can we avoid them?</li>
</ul><p><strong>Objectives</strong></p>
<ul><li>Recognise and resolve common spreadsheet formatting problems.</li>
</ul><p><strong>Keypoints</strong></p>
<ul><li>Avoid using multiple tables within one spreadsheet.</li>
<li>Avoid spreading data across multiple tabs.</li>
<li>Record zeros as zeros.</li>
<li>Use an appropriate null value to record missing data.</li>
<li>Don’t use formatting to convey information or to make your
spreadsheet look pretty.</li>
<li>Place comments in a separate column.</li>
<li>Record units in column headers.</li>
<li>Include only one piece of information in a cell.</li>
<li>Avoid spaces, numbers and special characters in column headers.</li>
<li>Avoid special characters in your data.</li>
<li>Record metadata in a separate plain text file.</li>
</ul><!-- This lesson is meant to be used as a reference for discussion as --><!-- learners identify issues with the messy dataset discussed in the --><!-- previous lesson. Instructors: don't go through this lesson except to --><!-- refer to responses to the exercise in the previous lesson. --><p>There are a few potential errors to be on the lookout for in your own
data as well as data from collaborators or the Internet. If you are
aware of the errors and the possible negative effect on downstream data
analysis and result interpretation, it might motivate yourself and your
project members to try and avoid them. Making small changes to the way
you format your data in spreadsheets, can have a great impact on
efficiency and reliability when it comes to data cleaning and
analysis.</p>
<ul><li><a href="#tables">Using multiple tables</a></li>
<li><a href="#tabs">Using multiple tabs</a></li>
<li><a href="#zeros">Not filling in zeros</a></li>
<li><a href="#null">Using problematic null values</a></li>
<li><a href="#formatting">Using formatting to convey
information</a></li>
<li><a href="#formatting_pretty">Using formatting to make the data sheet
look pretty</a></li>
<li><a href="#units">Placing comments or units in cells</a></li>
<li><a href="#info">Entering more than one piece of information in a
cell</a></li>
<li><a href="#field_name">Using problematic field names</a></li>
<li><a href="#special">Using special characters in data</a></li>
<li><a href="#metadata">Inclusion of metadata in data table</a></li>
</ul><div class="section level3">
<h3 id="tables">Using multiple tables<a class="anchor" aria-label="anchor" href="#tables"></a></h3>
<p>A common strategy is creating multiple data tables within one
spreadsheet. This confuses the computer, so don’t do this! When you
create multiple tables within one spreadsheet, you’re drawing false
associations between things for the computer, which sees each row as an
observation. You’re also potentially using the same field name in
multiple places, which will make it harder to clean your data up into a
usable form. The example below depicts the problem:</p>
<figure><img src="../fig/2_datasheet_example.jpg" class="figure mx-auto d-block"></figure><p>In the example above, the computer will see (for example) row 4 and
assume that all columns A-AF refer to the same sample. This row actually
represents four distinct samples (sample 1 for each of four different
collection dates - May 29th, June 12th, June 19th, and June 26th), as
well as some calculated summary statistics (an average (avr) and
standard error of measurement (SEM)) for two of those samples. Other
rows are similarly problematic.</p>
</div>
<div class="section level3">
<h3 id="tabs">Using multiple tabs<a class="anchor" aria-label="anchor" href="#tabs"></a></h3>
<p>But what about workbook tabs? That seems like an easy way to organise
data, right? Well, yes and no. When you create extra tabs, you fail to
allow the computer to see connections in the data that are there (you
have to introduce spreadsheet application-specific functions or
scripting to ensure this connection). Say, for instance, you make a
separate tab for each day you take a measurement.</p>
<p>This isn’t good practice for two reasons:</p>
<ol style="list-style-type: decimal"><li><p>you are more likely to accidentally add inconsistencies to your
data if each time you take a measurement, you start recording data in a
new tab, and</p></li>
<li><p>even if you manage to prevent all inconsistencies from creeping
in, you will add an extra step for yourself before you analyse the data
because you will have to combine these data into a single datatable. You
will have to explicitly tell the computer how to combine tabs - and if
the tabs are inconsistently formatted, you might even have to do it
manually.</p></li>
</ol><p>The next time you’re entering data, and you go to create another tab
or table, ask yourself if you could avoid adding this tab by adding
another column to your original spreadsheet. We used multiple tabs in
our example of a messy data file, but now you’ve seen how you can
reorganise your data to consolidate across tabs.</p>
<p>Your data sheet might get very long over the course of the
experiment. This makes it harder to enter data if you can’t see your
headers at the top of the spreadsheet. But don’t repeat your header row.
These can easily get mixed into the data, leading to problems down the
road. Instead you can <a href="https://support.office.com/en-ca/article/Freeze-column-headings-for-easy-scrolling-57ccce0c-cf85-4725-9579-c5d13106ca6a" class="external-link">freeze
the column headers</a> so that they remain visible even when you have a
spreadsheet with many rows.</p>
</div>
<div class="section level3">
<h3 id="zeros">Not filling in zeros<a class="anchor" aria-label="anchor" href="#zeros"></a></h3>
<p>It might be that when you’re measuring something, it’s usually a
zero, say the number of times a rabbit is observed in the survey. Why
bother writing in the number zero in that column, when it’s mostly
zeros?</p>
<p>However, there’s a difference between a zero and a blank cell in a
spreadsheet. To the computer, a zero is actually data. You measured or
counted it. A blank cell means that it wasn’t measured and the computer
will interpret it as an unknown value (also known as a null or missing
value).</p>
<p>The spreadsheets or statistical programs will likely misinterpret
blank cells that you intend to be zeros. By not entering the value of
your observation, you are telling your computer to represent that data
as unknown or missing (null). This can cause problems with subsequent
calculations or analyses. For example, the average of a set of numbers
which includes a single null value is always null (because the computer
can’t guess the value of the missing observations). Because of this,
it’s very important to record zeros as zeros and truly missing data as
nulls.</p>
</div>
<div class="section level3">
<h3 id="null">Using problematic null values<a class="anchor" aria-label="anchor" href="#null"></a></h3>
<p><strong>Example</strong>: using -999 or other numerical values (or
zero) to represent missing data.</p>
<p><strong>Solutions</strong>:</p>
<p>There are a few reasons why null values get represented differently
within a dataset. Sometimes confusing null values are automatically
recorded from the measuring device. If that’s the case, there’s not much
you can do, but it can be addressed in data cleaning with a tool like <a href="https://www.datacarpentry.org/OpenRefine-ecology-lesson/" class="external-link">OpenRefine</a>
before analysis. Other times different null values are used to convey
different reasons why the data isn’t there. This is important
information to capture, but is in effect using one column to capture two
pieces of information. Like for <a href="#formatting">using formatting
to convey information</a> it would be good here to create a new column
like ‘data_missing’ and use that column to capture the different
reasons.</p>
<p>Whatever the reason, it’s a problem if unknown or missing data is
recorded as -999, 999, or 0.</p>
<p>Many statistical programs will not recognise that these are intended
to represent missing (null) values. How these values are interpreted
will depend on the software you use to analyse your data. It is
essential to use a clearly defined and consistent null indicator.</p>
<p>Blanks (most applications) and NA (for R) are good choices. <span class="citation">@White:2013</span> explain good choices for indicating
null values for different software applications in their article:</p>
<figure><img src="../fig/3_white_table_1.jpg" class="figure mx-auto d-block"></figure></div>
<div class="section level3">
<h3 id="formatting">Using formatting to convey information<a class="anchor" aria-label="anchor" href="#formatting"></a></h3>
<p><strong>Example</strong>: highlighting cells, rows or columns that
should be excluded from an analysis, leaving blank rows to indicate
separations in data.</p>
<figure><img src="../fig/formatting.png" class="figure mx-auto d-block"></figure><p><strong>Solution</strong>: create a new field to encode which data
should be excluded.</p>
<figure><img src="../fig/good_formatting.png" class="figure mx-auto d-block"></figure></div>
<div class="section level3">
<h3 id="using-formatting-to-make-the-data-sheet-look-pretty-formatting_pretty">Using formatting to make the data sheet look pretty
{#formatting_pretty}<a class="anchor" aria-label="anchor" href="#using-formatting-to-make-the-data-sheet-look-pretty-formatting_pretty"></a></h3>
<p><strong>Example</strong>: merging cells.</p>
<p><strong>Solution</strong>: If you’re not careful, formatting a
worksheet to be more aesthetically pleasing can compromise your
computer’s ability to see associations in the data. Merged cells will
make your data unreadable by statistics software. Consider restructuring
your data in such a way that you will not need to merge cells to
organise your data.</p>
</div>
<div class="section level3">
<h3 id="units">Placing comments or units in cells<a class="anchor" aria-label="anchor" href="#units"></a></h3>
<p>Most analysis software can’t see Excel or LibreOffice comments, and
would be confused by comments placed within your data cells. As
described above for formatting, create another field if you need to add
notes to cells. Similarly, don’t include units in cells: ideally, all
the measurements you place in one column should be in the same unit, but
if for some reason they aren’t, create another field and specify the
units the cell is in.</p>
</div>
<div class="section level3">
<h3 id="info">Entering more than one piece of information in a cell<a class="anchor" aria-label="anchor" href="#info"></a></h3>
<p><strong>Example</strong>: Recording ABO and Rhesus groups in one
cell, such as A+, B+, A-, …</p>
<p><strong>Solution</strong>: Don’t include more than one piece of
information in a cell. This will limit the ways in which you can analyse
your data. If you need both these measurements, design your data sheet
to include this information. For example, include one column for the ABO
group and one for the Rhesus group.</p>
</div>
<div class="section level3">
<h3 id="using-problematic-field-names-field_name">Using problematic field names {#field_name}<a class="anchor" aria-label="anchor" href="#using-problematic-field-names-field_name"></a></h3>
<p>Choose descriptive field names, but be careful not to include spaces,
numbers, or special characters of any kind. Spaces can be misinterpreted
by parsers that use whitespace as delimiters and some programs don’t
like field names that are text strings that start with numbers.</p>
<p>Underscores (<code>_</code>) are a good alternative to spaces.
Consider writing names in camel case (like this: ExampleFileName) to
improve readability. Remember that abbreviations that make sense at the
moment may not be so obvious in 6 months, but don’t overdo it with names
that are excessively long. Including the units in the field names avoids
confusion and enables others to readily interpret your fields.</p>
<p><strong>Examples</strong></p>
<table class="table"><thead><tr class="header"><th>Good Name</th>
<th>Good Alternative</th>
<th>Avoid</th>
</tr></thead><tbody><tr class="odd"><td>Max_temp_C</td>
<td>MaxTemp</td>
<td>Maximum Temp (°C)</td>
</tr><tr class="even"><td>Precipitation_mm</td>
<td>Precipitation</td>
<td>precmm</td>
</tr><tr class="odd"><td>Mean_year_growth</td>
<td>MeanYearGrowth</td>
<td>Mean growth/year</td>
</tr><tr class="even"><td>sex</td>
<td>sex</td>
<td>M/F</td>
</tr><tr class="odd"><td>weight</td>
<td>weight</td>
<td>w.</td>
</tr><tr class="even"><td>cell_type</td>
<td>CellType</td>
<td>Cell Type</td>
</tr><tr class="odd"><td>Observation_01</td>
<td>first_observation</td>
<td>1st Obs</td>
</tr></tbody></table></div>
<div class="section level3">
<h3 id="special">Using special characters in data<a class="anchor" aria-label="anchor" href="#special"></a></h3>
<p><strong>Example</strong>: You treat your spreadsheet program as a
word processor when writing notes, for example copying data directly
from Word or other applications.</p>
<p><strong>Solution</strong>: This is a common strategy. For example,
when writing longer text in a cell, people often include line breaks,
em-dashes, etc. in their spreadsheet. Also, when copying data in from
applications such as Word, formatting and fancy non-standard characters
(such as left- and right-aligned quotation marks) are included. When
exporting this data into a coding/statistical environment or into a
relational database, dangerous things may occur, such as lines being cut
in half and encoding errors being thrown.</p>
<p>General best practice is to avoid adding characters such as newlines,
tabs, and vertical tabs. In other words, treat a text cell as if it were
a simple web form that can only contain text and spaces.</p>
</div>
<div class="section level3">
<h3 id="metadata">Inclusion of metadata in data table<a class="anchor" aria-label="anchor" href="#metadata"></a></h3>
<p><strong>Example</strong>: You add a legend at the top or bottom of
your data table explaining column meaning, units, exceptions, etc.</p>
<p><strong>Solution</strong>: Recording data about your data
(“metadata”) is essential. You may be on intimate terms with your
dataset while you are collecting and analysing it, but the chances that
you will still remember that the variable “sglmemgp” means single member
of group, for example, or the exact algorithm you used to transform a
variable or create a derived one, after a few months, a year, or more
are slim.</p>
<p>As well, there are many reasons other people may want to examine or
use your data - to understand your findings, to verify your findings, to
review your submitted publication, to replicate your results, to design
a similar study, or even to archive your data for access and re-use by
others. While digital data by definition are machine-readable,
understanding their meaning is a job for human beings. The importance of
documenting your data during the collection and analysis phase of your
research cannot be overestimated, especially if your research is going
to be part of the scholarly record.</p>
<p>However, metadata should not be contained in the data file itself.
Unlike a table in a paper or a supplemental file, metadata (in the form
of legends) should not be included in a data file since this information
is not data, and including it can disrupt how computer programs
interpret your data file. Rather, metadata should be stored as a
separate file in the same directory as your data file, preferably in
plain text format with a name that clearly associates it with your data
file. Because metadata files are free text format, they also allow you
to encode comments, units, information about how null values are
encoded, etc. that are important to document but can disrupt the
formatting of your data file.</p>
<p>Additionally, file or database level metadata describes how files
that make up the dataset relate to each other; what format they are in;
and whether they supercede or are superceded by previous files. A
folder-level readme.txt file is the classic way of accounting for all
the files and folders in a project.</p>
<p>(Text on metadata adapted from the online course Research Data <a href="https://datalib.edina.ac.uk/mantra" class="external-link">MANTRA</a> by EDINA and Data
Library, University of Edinburgh. MANTRA is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/" class="external-link">Creative Commons
Attribution 4.0 International License</a>.)</p>
</div>
</section><section id="exporting-data"><h2 class="section-heading">Exporting data<a class="anchor" aria-label="anchor" href="#exporting-data"></a>
</h2>
<hr class="half-width"><p><strong>Question</strong></p>
<ul><li>How can we export data from spreadsheets in a way that is useful for
downstream applications?</li>
</ul><p><strong>Objectives</strong></p>
<ul><li>Store spreadsheet data in universal file formats.</li>
<li>Export data from a spreadsheet to a CSV file.</li>
</ul><p><strong>Keypoints</strong></p>
<ul><li><p>Data stored in common spreadsheet formats will often not be read
correctly into data analysis software, introducing errors into your
data.</p></li>
<li><p>Exporting data from spreadsheets to formats like CSV or TSV puts
it in a format that can be used consistently by most programs.</p></li>
</ul><p>Storing the data you’re going to work with for your analyses in Excel
default file format (<code>*.xls</code> or <code>*.xlsx</code> -
depending on the Excel version) isn’t a good idea. Why?</p>
<ul><li><p>Because it is a proprietary format, and it is possible that in
the future, technology won’t exist (or will become sufficiently rare) to
make it inconvenient, if not impossible, to open the file.</p></li>
<li><p>Other spreadsheet software may not be able to open files saved in
a proprietary Excel format.</p></li>
<li><p>Different versions of Excel may handle data differently, leading
to inconsistencies. <a href="https://datacarpentry.org/spreadsheet-ecology-lesson/03-dates-as-data/index.html" class="external-link">Dates</a>
is a well-documented example of inconsistencies in data
storage.</p></li>
<li><p>Finally, more journals and grant agencies are requiring you to
deposit your data in a data repository, and most of them don’t accept
Excel format. It needs to be in one of the formats discussed
below.</p></li>
<li><p>The above points also apply to other formats such as open data
formats used by LibreOffice / Open Office. These formats are not static
and do not get parsed the same way by different software
packages.</p></li>
</ul><p>Storing data in a universal, open, and static format will help deal
with this problem. Try tab-delimited (tab separated values or TSV) or
comma-delimited (comma separated values or CSV). CSV files are plain
text files where the columns are separated by commas, hence ‘comma
separated values’ or CSV. The advantage of a CSV file over an
Excel/SPSS/etc. file is that we can open and read a CSV file using just
about any software, including plain text editors like TextEdit or
NotePad. Data in a CSV file can also be easily imported into other
formats and environments, such as SQLite and R. We’re not tied to a
certain version of a certain expensive program when we work with CSV
files, so it’s a good format to work with for maximum portability and
endurance. Most spreadsheet programs can save to delimited text formats
like CSV easily, although they may give you a warning during the file
export.</p>
<p>To save a file you have opened in Excel in CSV format:</p>
<ol style="list-style-type: decimal"><li>From the top menu select ‘File’ and ‘Save as’.</li>
<li>In the ‘Format’ field, from the list, select ‘Comma Separated
Values’ (<code>*.csv</code>).</li>
<li>Double check the file name and the location where you want to save
it and hit ‘Save’.</li>
</ol><p>An important note for backwards compatibility: you can open CSV files
in Excel!</p>
<figure style="text-align: center"><img src="../fig/excel-to-csv.png" alt="Saving an Excel file to CSV." width="70%" class="figure mx-auto d-block"><figcaption>
Saving an Excel file to CSV.
</figcaption></figure><p><strong>A note on R and <code>xls</code></strong>: There are R
packages that can read <code>xls</code> files (as well as Google
spreadsheets). It is even possible to access different worksheets in the
<code>xls</code> documents.</p>
<p><strong>But</strong></p>
<ul><li>some of these only work on Windows.</li>
<li>this equates to replacing a (simple but manual) export to
<code>csv</code> with additional complexity/dependencies in the data
analysis R code.</li>
<li>data formatting best practice still apply.</li>
<li>Is there really a good reason why <code>csv</code> (or similar) is
not adequate?</li>
</ul><div class="section level3">
<h3 id="caveats-on-commas">Caveats on commas<a class="anchor" aria-label="anchor" href="#caveats-on-commas"></a></h3>
<p>In some datasets, the data values themselves may include commas (,).
In that case, the software which you use (including Excel) will most
likely incorrectly display the data in columns. This is because the
commas which are a part of the data values will be interpreted as
delimiters.</p>
<p>For example, our data might look like this:</p>
<pre><code>species_id,genus,species,taxa
AB,Amphispiza,bilineata,Bird
AH,Ammospermophilus,harrisi,Rodent, not censused
AS,Ammodramus,savannarum,Bird
BA,Baiomys,taylori,Rodent</code></pre>
<p>In the record
<code>AH,Ammospermophilus,harrisi,Rodent, not censused</code> the value
for <code>taxa</code> includes a comma
(<code>Rodent, not censused</code>). If we try to read the above into
Excel (or other spreadsheet program), we will get something like
this:</p>
<figure style="text-align: center"><img src="../fig/csv-mistake.png" alt="The risks of having commas inside comma-separated data." width="80%" class="figure mx-auto d-block"><figcaption>
The risks of having commas inside comma-separated data.
</figcaption></figure><p>The value for <code>taxa</code> was split into two columns (instead
of being put in one column <code>D</code>). This can propagate to a
number of further errors. For example, the extra column will be
interpreted as a column with many missing values (and without a proper
header). In addition to that, the value in column <code>D</code> for the
record in row 3 (so the one where the value for ‘taxa’ contained the
comma) is now incorrect.</p>
<p>If you want to store your data in <code>csv</code> format and expect
that your data values may contain commas, you can avoid the problem
discussed above by putting the values in quotes (““). Applying this
rule, our data might look like this:</p>
<pre><code>species_id,genus,species,taxa
"AB","Amphispiza","bilineata","Bird"
"AH","Ammospermophilus","harrisi","Rodent, not censused"
"AS","Ammodramus","savannarum","Bird"
"BA","Baiomys","taylori","Rodent"</code></pre>
<p>Now opening this file as a <code>csv</code> in Excel will not lead to
an extra column, because Excel will only use commas that fall outside of
quotation marks as delimiting characters.</p>
<p>Alternatively, if you are working with data that contains commas, you
likely will need to use another delimiter when working in a
spreadsheet<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>. In this case, consider using tabs as your
delimiter and working with TSV files. TSV files can be exported from
spreadsheet programs in the same way as CSV files.</p>
<p>If you are working with an already existing dataset in which the data
values are not included in “” but which have commas as both delimiters
and parts of data values, you are potentially facing a major problem
with data cleaning. If the dataset you’re dealing with contains hundreds
or thousands of records, cleaning them up manually (by either removing
commas from the data values or putting the values into quotes - ““) is
not only going to take hours and hours but may potentially end up with
you accidentally introducing many errors.</p>
<p>Cleaning up datasets is one of the major problems in many scientific
disciplines. The approach almost always depends on the particular
context. However, it is a good practice to clean the data in an
automated fashion, for example by writing and running a script. The
Python and R lessons will give you the basis for developing skills to
build relevant scripts.</p>
</div>
</section><section id="summary"><h2 class="section-heading">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<hr class="half-width"><figure style="text-align: center"><img src="../fig/analysis.png" alt="A typical data analysis workflow." class="figure mx-auto d-block"><figcaption>
A typical data analysis workflow.
</figcaption></figure><p>A typical data analysis workflow is illustrated in the figure above,
where data is repeatedly transformed, visualised, and modelled. This
iteration is repeated multiple times until the data is understood. In
many real-life cases, however, most time is spent cleaning up and
preparing the data, rather than actually analysing and understanding
it.</p>
<p>An agile data analysis workflow, with several fast iterations of the
transform/visualise/model cycle is only feasible if the data is
formatted in a predictable way and one can reason about the data without
having to look at it and/or fix it.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul><li>Good data organization is the foundation of any research
project.</li>
</ul></div>
</div>
</div>
</section><div class="footnotes footnotes-end-of-document">
<hr><ol><li id="fn1"><p>This is particularly relevant in European countries
where the comma is used as a decimal separator. In such cases, the
default value separator in a csv file will be the semi-colon (;), or
values will be systematically quoted.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol></div>



      </div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/index.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/20-r-rstudio.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/index.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Home
        </a>
        <a class="chapter-link float-end" href="../instructor/20-r-rstudio.html" rel="next">
          Next: R and RStudio... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
				<p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/carpentries-incubator/bioc-intro/edit/main/episodes/10-data-organisation.Rmd" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/carpentries-incubator/bioc-intro/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a> 
        | <a href="https://github.com/carpentries-incubator/bioc-intro/" class="external-link">Source</a></p>
				<p><a href="https://github.com/carpentries-incubator/bioc-intro/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:laurent.gatto@uclouvain.be">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="../LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p><a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">Template licensed under CC-BY 4.0</a> by <a href="https://carpentries.org" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.14.1" class="external-link">sandpaper (0.14.1)</a>,
        <a href="https://github.com/carpentries/pegboard/tree/0.7.2" class="external-link">pegboard (0.7.2)</a>,
      and <a href="https://github.com/carpentries/varnish/tree/0.3.3" class="external-link">varnish (0.3.3)</a>.</p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
			<i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back to top"></i><br><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://carpentries-incubator.github.io/bioc-intro/instructor/10-data-organisation.html",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Data organisation with spreadsheets",
  "creativeWorkStatus": "active",
  "url": "https://carpentries-incubator.github.io/bioc-intro/instructor/10-data-organisation.html",
  "identifier": "https://carpentries-incubator.github.io/bioc-intro/instructor/10-data-organisation.html",
  "dateCreated": "2020-09-14",
  "dateModified": "2023-11-21",
  "datePublished": "2023-11-21"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo
    2022-11-07: we have gotten a notification that we have an overage for our
    tracking and I'm pretty sure this has to do with Workbench usage.
    Considering that I am not _currently_ using this tracking because I do not
    yet know how to access the data, I am turning this off for now.
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
    _paq.push(["setDomains", ["*.preview.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
    _paq.push(["setDoNotTrack", true]);
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
          var u="https://carpentries.matomo.cloud/";
          _paq.push(['setTrackerUrl', u+'matomo.php']);
          _paq.push(['setSiteId', '1']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.async=true; g.src='https://cdn.matomo.cloud/carpentries.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
  </script>
  End Matomo Code --></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

